分布式光伏管理业务线关系模式文档
本系统的各关系模式均由 UML 类图及全局 E-R 图按照关系模式转换原则得到，又经数轮关系模式规范化和模式评价以优化改进。
当前所有关系模式中的属性均为不可再分的原子值，未包含重复组或多值属性，因此整体满足第一范式（1NF）。
对于存在联合主码的关系模式，已确保所有非主属性均完全函数依赖于整个主码，不存在仅依赖于主码真子集的情况；对可能产生部分依赖风险的属性，已通过合理拆分关系模式予以消除，因此整体满足第二范式（2NF）。
在此基础上，针对各关系模式中可能存在的传递依赖问题，结合具体业务语义对各个关系模式及其范式进行进一步分析与说明：

（1）光伏设备表（关系模式 R1）
关系模式：
光伏设备(设备编号，设备类型，安装位置，装机容量，投运时间，校准周期，运行状态，通信协议，并网点编号)
主码：
设备编号
外码：
无
范式结论：
BCNF
范式依据：
本关系模式以设备编号为主码，设备编号唯一决定该表的各项非主属性，即存在函数依赖：设备编号 → 设备类型、安装位置、装机容量、投运时间、校准周期、运行状态、通信协议、并网点编号。从业务语义来看，各非主属性均为光伏设备的独立基础特征，彼此之间不存在确定性的函数依赖关系。因此，本关系模式不存在传递依赖，满足第三范式（3NF）。
进一步来看，除主码设备编号引出的函数依赖外，本表无其他非平凡函数依赖，所有非平凡函数依赖的决定因素均为超码，故该关系模式满足 BCNF。

（2）光伏发电数据表（关系模式 R2）
关系模式：
光伏发电数据(数据编号，采集时间，发电量，上网电量，自用电量，逆变器效率，汇流箱组串电压，汇流箱组串电流，设备编号)
主码：
数据编号
外码：
设备编号 → 光伏设备表(设备编号)
范式结论：
BCNF
范式依据：
本关系模式以数据编号为主码，数据编号决定该表的所有非主属性，即函数依赖：数据编号 → 采集时间、发电量、上网电量、自用电量、逆变器效率、汇流箱组串电压、汇流箱组串电流、设备编号。因此，本表无传递依赖，满足第三范式（3NF）。
此外，本表所有非主属性均无法作为决定因素形成新的非平凡函数依赖，所有非平凡函数依赖的决定因素仅为主码数据编号（超码），故该关系模式满足 BCNF。

（3）光伏预测数据表（关系模式 R3）
关系模式：
光伏预测数据(预测编号，预测日期，预测时段，预测发电量，实际发电量，预测模型版本，设备编号)
主码：
预测编号
外码：
设备编号 → 光伏设备表(设备编号)
范式结论：
BCNF
范式依据：
本关系模式以预测编号为主码，预测编号唯一决定该表的全部非主属性，即函数依赖：预测编号 → 预测日期、预测时段、预测发电量、实际发电量、预测模型版本、设备编号。因此，本表不存在传递依赖，满足第三范式（3NF）。
进一步分析，本表除主码预测编号外，无其他属性可作为决定因素形成非平凡函数依赖，所有非平凡函数依赖的决定因素均为超码，故该关系模式满足 BCNF。

（4）光伏发电_预测关联表（关系模式 R4）
关系模式：
光伏发电_预测关联 (数据编号，预测编号)
主码：
数据编号
外码：
预测编号 → 光伏预测数据表 (预测编号)，数据编号 → 光伏发电数据表 (数据编号)
范式结论：
BCNF
范式依据：
本关系模式以数据编号为主码，核心作用是建立单条光伏发电数据与对应光伏预测数据的精准关联。依据系统业务约束，光伏发电数据和预测数据成对存在，每条光伏发电数据记录对应一条预测记录，存在函数依赖：数据编号 → 预测编号。从范式合规性分析：
满足3NF：非主属性预测编号仅依赖于主码数据编号，不存在传递依赖；
满足BCNF：主码数据编号是唯一的超码，所有非平凡函数依赖的决定因素均为超码，因此该关系模式满足BCNF。

综上所述，本系统中全部关系模式均满足BCNF，有效避免了数据冗余以及插入、删除和更新异常，符合分布式光伏管理业务线的数据存储与关联需求。
